


const products = [
  {
    price: "$87.",
    miniprice: "97",
    image: "./public/image/Men's/NIKE+AIR+MAX+ISHOD.png",
    name: "NIKE AIRMAX ISHOD",
    type: "Lifestyle",
    description: "Men's Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$69.",
    miniprice: "97",
    image: "./public/image/Men's/NIKE+AIR+MAX+IMPACT+4.png",
    name: "NIKE AIRMAX IMPACT 4",
    type: 'Basketball Shoes',
    description: "Basketball Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$126.",
    miniprice: "97",
    image: "./public/image/Men's/NIKE+ZOOMX+ZEGAMA+TRAIL+2.png",
    name: "NIKE ZEGAMA TRAIL 2",
    type: 'Running Shoes',
    description: "Men's Trail-Running Shoes",
    priceRange: "$101-$150"
  },

  {
    price: "$160",
    miniprice: "",
    image: "./public/image/Men's/GG.png",
    name: "NIKE AIR PEGASUS WAVE",
    type: 'Lifestyle',
    description: "Men's Shoes",
    priceRange: "$151-$200"

  },
  {
    price: "$85",
    miniprice: "",
    image: "./public/image/Men's/M+NIKE+COURT+LITE+4+HERITAGE.png",
    name: "NIKECOURT LITE 4 HERITAGE",
    type: 'Tennis Shoes',
    description: "Men's Hard Court Tennis Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$128.",
    miniprice: "97",
    image: "./public/image/Men's/M+ZOOM+GP+CHALLENGE+1+HC.png",
    name: "ZOOM GP CHALLENGE 1 HC",
    type: 'Tennis Shoes',
    description: "Men's Hard Court Tennis Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$56.",
    miniprice: "47",
    image: "./public/image/Men's/NIKE+FLY.BY+MID+3.png",
    name: "NIKE FLY.BY MID 3",
    type: 'Basketball Shoes',
    description: "Basketball Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$80",
    miniprice: "",
    image: "./public/image/Men's/AIR+MONARCH+IV.png",
    name: "AIR MONARCH IV",
    type: 'Workout Shoes',
    description: "Men's Workout Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$80",
    miniprice: "",
    image: "./public/image/Men's/M+NIKE+MC+TRAINER+3.png",
    name: "NIKE MC TRAINER 3",
    type: 'Workout Shoes',
    description: "Men's Workout Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$77.",
    miniprice: "97",
    image: "./public/image/Men's/NIKE+FREE+RN+FK+NEXT+NATURE.png",
    name: "NIKE FREE RN NN",
    type: 'Running Shoes',
    description: "Men's Road-Running Shoes",
    priceRange: "$51-$100"
  },

  {
    price: "$260",
    miniprice: "",
    image: "./public/image/Men's/PHANTOM+GX+II+CLUB+FG_MG.png",
    name: "PHANTOM GX 2 ELITE",
    type: 'Soccer Shoes',
    description: "FG Low-Top Soccer Cleats",
    priceRange: "$201-$250"
  },
  {
    price: "$90",
    miniprice: "",
    image: "./public/image/Men's/NIKE+REAX+8+TR+MESH.png",
    name: "NIKE REAX 8 TR",
    type: 'Workout Shoes',
    description: "Men's Workout Shoes",
    priceRange: "$51-$100"
  },

  {
    price: "$130",
    miniprice: "",
    image: "./public/image/Men's/SM-1.png",
    name: "Nike GP Challenge Pro Premium",
    type: 'Tennis Shoes',
    description: "Men's Hard Court Tennis Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$270",
    miniprice: "",
    image: "./public/image/Men's/SM-2.png",
    name: "Nike Mercurial Vapor 16 Elite",
    type: 'Soccer Shoes',
    description: "FG Low-Top Football Boot",
    priceRange: "$201-$250"

  },
  {
    price: "$150",
    miniprice: "",
    image: "./public/image/Men's/SM-3.png",
    name: "Nike Air Pegasus 2005",
    type: 'Lifestyle',
    description: "Men's Shoes",
    priceRange: '$101-$150'
  },
  {
    price: "$52.",
    miniprice: "97",
    image: "./public/image/Men's/SM-4.png",
    name: "Nike Flex Control 4",
    type: 'Workout Shoes',
    description: "Men's Workout Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$125.",
    miniprice: "97",
    image: "./public/image/Men's/SM-5.png",
    name: "Nike Air More Uptempo '96",
    type: 'Lifestyle',
    description: "Men's Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$95",
    miniprice: "",
    image: "./public/image/Men's/SM-6.png",
    name: "Nike Mercurial Vapor 16 Academy 'Kylian Mbapp√©'",
    type: 'Soccer Shoes',
    description: "TF Low-Top Soccer Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$115",
    miniprice: "",
    image: "./public/image/Men's/SM-7.png",
    name: "Nike Air Force 1 '07",
    type: 'Lifestyle',
    description: "Men's Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$180",
    miniprice: "",
    image: "./public/image/Men's/SM-8.png",
    name: "LeBron XXII 'Crown Jewel'",
    type: 'Basketball Shoes',
    description: "Basketball Shoes",
    priceRange: "$151-$200"
  },
  {
    price: "$119.",
    miniprice: "97",
    image: "./public/image/Men's/SM-9.jpg",
    name: "Nike Streakfly",
    type: 'Running Shoes',
    description: "Road Racing Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$240",
    miniprice: "",
    image: "./public/image/Men's/SM-10.png",
    name: "Nike Tiempo Legend 10 Elite",
    type: 'Soccer Shoes',
    description: "Firm-Ground Low-Top Soccer Cleats",
    priceRange: "$201-$250"
  },
  {
    price: "$180",
    miniprice: "",
    image: "./public/image/Men's/SM-11.png",
    name: "Nike Invincible 3",
    type: 'Running Shoes',
    description: "Men's Road Running Shoes",
    priceRange: "$151-$200"
  },
  {
    price: "$130",
    miniprice: "",
    image: "./public/image/Men's/SM-12.png",
    name: "Sabrina 2 'United'",
    type: 'Basketball Shoes',
    description: "Basketball Shoes",
    priceRange: "$101-$150"
  },
];

let currentIndex = 0;
const productsToShow = 12;
const productGrid = document.getElementById("product-grid");
const showMoreButton = document.getElementById("show-more");


function loadProducts(filteredProducts = products) {
  const end = Math.min(currentIndex + productsToShow, filteredProducts.length);


  for (let i = currentIndex; i < end; i++) {
    const product = filteredProducts[i];
    const productCard = document.createElement("div");
    productCard.className = "product-card";
    productCard.innerHTML = `
      <div class="price">${product.price} <span>${product.miniprice}</span></div>
      <img src="${product.image}" alt="${product.name}" />
      <div class="product-name2">${product.name}</div>
      <div class="product-description">${product.description}</div>
    `;
    productGrid.appendChild(productCard);

    const priceElement = productCard.querySelector(".price");
    if (document.getElementById("sidebar").classList.contains("open")) {
      priceElement.classList.add("shifted-price");
    }
  }

  currentIndex = end;
  showMoreButton.style.display = currentIndex < filteredProducts.length ? "block" : "none";
}


showMoreButton.addEventListener("click", () => loadProducts());


loadProducts();

// Filter functionality
function toggleFilter() {
  const sidebar = document.getElementById("sidebar");
  const productContainer = document.querySelector(".product-container");

  const filterButtonText = document.querySelector(".filters-btn__filter_text");
  sidebar.classList.toggle("open");
  productContainer.classList.toggle("sidebar-open");
  showMoreButton.classList.toggle("sidebar-open");
  document.querySelectorAll(".product-card .price").forEach(price => {
    price.classList.toggle("shifted-price", sidebar.classList.contains("open"));
  });


  if (sidebar.classList.contains("open")) {
    filterButtonText.textContent = "Hide Filters";
  } else {
    filterButtonText.textContent = "Show Filters";
  }

}

function applyFilters() {
  // Get the selected types
  const selectedTypes = Array.from(document.querySelectorAll(".filter-option:checked"))
    .map(input => input.value);

  // Get the selected price ranges
  const selectedPriceRanges = Array.from(document.querySelectorAll(".price-option:checked"))
    .map(input => input.value);

  // Filter products based on selected type and price range
  const filteredProducts = products.filter(product => {
    const typeMatches = selectedTypes.length === 0 || selectedTypes.includes(product.type);
    const priceMatches = selectedPriceRanges.length === 0 || selectedPriceRanges.includes(product.priceRange);
    return typeMatches && priceMatches;
  });

  // Reset the grid and load the filtered products
  currentIndex = 0;
  productGrid.innerHTML = "";
  loadProducts(filteredProducts);
}

// Ensure the function is called whenever a checkbox is selected
document.querySelectorAll(".filter-option, .price-option").forEach(checkbox =>
  checkbox.addEventListener("change", applyFilters)
);



// Sorting functionality
function sortProducts(order) {
  if (order === "price-asc") {
    products.sort((a, b) => parseFloat(a.price.replace('$', '')) - parseFloat(b.price.replace('$', '')));
  } else if (order === "price-desc") {
    products.sort((a, b) => parseFloat(b.price.replace('$', '')) - parseFloat(a.price.replace('$', '')));
  }

  currentIndex = 0;
  productGrid.innerHTML = "";
  loadProducts();
}


function toggleSortDropdown() {

  const sortButton = document.getElementById("sortButton");
  const arrowIcon = sortButton.querySelector(".down-arrow");
  document.querySelector(".sort-container").classList.toggle("show");
  arrowIcon.classList.toggle("rotate");
}

document.getElementById("sortButton").onclick = toggleSortDropdown;
document.querySelectorAll(".sort-option").forEach(option =>
  option.addEventListener("click", function () {
    sortProducts(this.dataset.order);
  })
);


window.onclick = function (event) {
  if (!event.target.closest("#sortButton")) {
    document.querySelector(".sort-container").classList.remove("show");
  }
};

//Navbar
const header = document.querySelector(".header");
const nav = document.querySelector(".navbar");
const navHeight = nav.getBoundingClientRect().height;
// Function to handle the sticky behavior
const stickyNav = function (entries) {
  const [entry] = entries;

  if (!entry.isIntersecting) {
    nav.classList.add("sticky", "visible");
  } else {
    nav.classList.remove("sticky", "visible");
  }
};

const headerObserver = new IntersectionObserver(stickyNav, {
  root: null,
  threshold: 0,
  rootMargin: `-${navHeight}px`,
});

headerObserver.observe(header);