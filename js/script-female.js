


const products = [
  {
    price: "$140",
    miniprice: "",
    image: "./public/image/Women/img1.png",
    name: "Nike V2K Run GORE-TEX",
    type: "Lifestyle",
    description: "Women's Waterproof Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$180",
    miniprice: "",
    image: "./public/image/Women/img2.png",
    name: "NikeCourt Vapor 11 HC Premium",
    type: 'Tennis Shoes',
    description: "Women's Hard Court Tennis Shoes",
    priceRange: "$151-$200"
  },
  {
    price: "$120",
    miniprice: "",
    image: "./public/image/Women/img3.png",
    name: "Nike Free Metcon 6",
    type: 'Workout Shoes',
    description: "Women's Workout Shoes",
    priceRange: "$101-$150"
  },

  {
    price: "$85",
    miniprice: "",
    image: "./public/image/Women/img4.png",
    name: "Nike AL8",
    type: 'Soccer Shoes',
    description: "MG Low-Top Soccer Cleats",
    priceRange: "$51-$100"

  },
  {
    price: "$90",
    miniprice: "",
    image: "./public/image/Women/img5.png",
    name: "Nike AL8",
    type: 'Lifestyle Shoes',
    description: "Women's Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$190",
    miniprice: "",
    image: "./public/image/Women/img6.png",
    name: "Nike G.T. Cut 3",
    type: 'Basketball Shoes',
    description: "Women's Basketball Shoes",
    priceRange: "$151-$200"
  },
  {
    price: "$160",
    miniprice: "",
    image: "./public/image/Women/img7.png",
    name: "Nike Pegasus 41 GORE-TEX",
    type: 'Running Shoes',
    description: "Women's Waterproof Road Running Shoes",
    priceRange: "$151-$200"
  },
  {
    price: "$130",
    miniprice: "",
    image: "./public/image/Women/img8.png",
    name: "NikeCourt Air Zoom Vapor Pro 2",
    type: 'Tennis Shoes',
    description: "Women's Hard Court Tennis Shoes",
    priceRange: "$101-$151"
  },
  {
    price: "$65",
    miniprice: "",
    image: "./public/image/Women/img9.png",
    name: "Nike Legend Essential 2",
    type: 'Workout Shoes',
    description: "Women's Workout Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$90.",
    miniprice: "97",
    image: "./public/image/Women/img10.png",
    name: "Nike TC 7900",
    type: 'Lifestyle',
    description: "Women's Shoes",
    priceRange: "$51-$100"
  },

  {
    price: "$95",
    miniprice: "",
    image: "./public/image/Women/img11.png",
    name: "Nike Phantom Luna 2 Academy",
    type: 'Soccer Shoes',
    description: "TF High-Top Soccer Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$170",
    miniprice: "",
    image: "./public/image/Women/img12.png",
    name: "LeBron NXXT Gen AMDP 'Diana Taurasi'",
    type: 'Basketball Shoes',
    description: "Basketball Shoes",
    priceRange: "151-$200"
  },

  {
    price: "$130",
    miniprice: "",
    image: "./public/image/Women/SM-1.png",
    name: "Nike GP Challenge Pro Premium",
    type: 'Running Shoes',
    description: "Women's Waterproof Road Running Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$160",
    miniprice: "",
    image: "./public/image/Women/SM-2.png",
    name: "Nike Vomero 17",
    type: 'Running Shoes',
    description: "Women's Road Running Shoes (Extra Wide)",
    priceRange: "$151-$200"

  },
  {
    price: "$96.",
    miniprice: "97",
    image: "./public/image/Women/SM-3.jpg",
    name: "Nike Air Force 1 Wild",
    type: 'Lifestyle',
    description: "Women's Shoes",
    priceRange: '$51-$100'
  },
  {
    price: "$150",
    miniprice: "",
    image: "./public/image/Women/SM-4.png",
    name: "Nike Metcon 9 EasyOn",
    type: 'Workout Shoes',
    description: "Women's Workout Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$136.",
    miniprice: "97",
    image: "./public/image/Women/SM-5.png",
    name: "Nike G.T. Cut 3",
    type: 'Basketball Shoes',
    description: "Women's Basketball Shoes",
    priceRange: "$101-$150"
  },
  {
    price: "$85",
    miniprice: "",
    image: "./public/image/Women/SM-6.png",
    name: "Nike Tiempo Legend 10 Academy",
    type: 'Soccer Shoes',
    description: "Turf Low-Top Soccer Shoes",
    priceRange: "$51-$100"
  },
  {
    price: "$230",
    miniprice: "",
    image: "./public/image/Women/SM-7.png",
    name: "Air Jordan 11 Retro 'Bred Velvet'",
    type: 'Lifestyle',
    description: "Women's Shoes",
    priceRange: "$201-$250"
  },
  {
    price: "$215",
    miniprice: "",
    image: "./public/image/women/SM-8.jpg",
    name: "Nike Romaleos 4",
    type: 'Workout Shoes',
    description: "Weightlifting Shoes",
    priceRange: "$201-$250"
  },
  {
    price: "$250",
    miniprice: "",
    image: "./public/image/women/SM-9.png",
    name: "Nike Vaporfly 3",
    type: 'Running Shoes',
    description: "Women's Road Racing Shoes",
    priceRange: "$201-$250"
  },
  {
    price: "$240",
    miniprice: "",
    image: "./public/image/women/SM-10.png",
    name: "Nike Tiempo Emerald Legend 10 Elite",
    type: 'Soccer Shoes',
    description: "FG Low-Top Soccer Cleats",
    priceRange: "$201-$250"
  },
  {
    price: "$180",
    miniprice: "",
    image: "./public/image/women/SM-11.png",
    name: "Nike Zoom GP Challenge 1 Premium",
    type: 'Tennis Shoes',
    description: "Women's Hard Court Tennis Shoes",
    priceRange: "$151-$200"
  },
  {
    price: "$205",
    miniprice: "",
    image: "./public/image/women/SM-12.png",
    name: "Nike G.T. Cut 3 Electric",
    type: 'Basketball Shoes',
    description: "Basketball Shoes",
    priceRange: "$201-$250"
  },
];

let currentIndex = 0;
const productsToShow = 12;
const productGrid = document.getElementById("product-grid");
const showMoreButton = document.getElementById("show-more");


function loadProducts(filteredProducts = products) {
  const end = Math.min(currentIndex + productsToShow, filteredProducts.length);


  for (let i = currentIndex; i < end; i++) {
    const product = filteredProducts[i];
    const productCard = document.createElement("div");
    productCard.className = "product-card";
    productCard.innerHTML = `
      <div class="price">${product.price} <span>${product.miniprice}</span></div>
      <img src="${product.image}" alt="${product.name}" />
      <div class="product-name2">${product.name}</div>
      <div class="product-description">${product.description}</div>
    `;
    productGrid.appendChild(productCard);

    const priceElement = productCard.querySelector(".price");
    if (document.getElementById("sidebar").classList.contains("open")) {
      priceElement.classList.add("shifted-price");
    }
  }

  currentIndex = end;
  showMoreButton.style.display = currentIndex < filteredProducts.length ? "block" : "none";
}


showMoreButton.addEventListener("click", () => loadProducts());


loadProducts();

// Filter functionality
function toggleFilter() {
  const sidebar = document.getElementById("sidebar");
  const productContainer = document.querySelector(".product-container");

  const filterButtonText = document.querySelector(".filters-btn__filter_text");
  sidebar.classList.toggle("open");
  productContainer.classList.toggle("sidebar-open");
  showMoreButton.classList.toggle("sidebar-open");
  document.querySelectorAll(".product-card .price").forEach(price => {
    price.classList.toggle("shifted-price", sidebar.classList.contains("open"));
  });


  if (sidebar.classList.contains("open")) {
    filterButtonText.textContent = "Hide Filters";
  } else {
    filterButtonText.textContent = "Show Filters";
  }

}

function applyFilters() {
  // Get the selected types
  const selectedTypes = Array.from(document.querySelectorAll(".filter-option:checked"))
    .map(input => input.value);

  // Get the selected price ranges
  const selectedPriceRanges = Array.from(document.querySelectorAll(".price-option:checked"))
    .map(input => input.value);

  // Filter products based on selected type and price range
  const filteredProducts = products.filter(product => {
    const typeMatches = selectedTypes.length === 0 || selectedTypes.includes(product.type);
    const priceMatches = selectedPriceRanges.length === 0 || selectedPriceRanges.includes(product.priceRange);
    return typeMatches && priceMatches;
  });

  // Reset the grid and load the filtered products
  currentIndex = 0;
  productGrid.innerHTML = "";
  loadProducts(filteredProducts);
}

// Ensure the function is called whenever a checkbox is selected
document.querySelectorAll(".filter-option, .price-option").forEach(checkbox =>
  checkbox.addEventListener("change", applyFilters)
);



// Sorting functionality
function sortProducts(order) {
  if (order === "price-asc") {
    products.sort((a, b) => parseFloat(a.price.replace('$', '')) - parseFloat(b.price.replace('$', '')));
  } else if (order === "price-desc") {
    products.sort((a, b) => parseFloat(b.price.replace('$', '')) - parseFloat(a.price.replace('$', '')));
  }

  currentIndex = 0;
  productGrid.innerHTML = "";
  loadProducts();
}


function toggleSortDropdown() {
  const sortButton = document.getElementById("sortButton");
  const arrowIcon = sortButton.querySelector(".down-arrow");
  document.querySelector(".sort-container").classList.toggle("show");
  arrowIcon.classList.toggle("rotate");
}

document.getElementById("sortButton").onclick = toggleSortDropdown;
document.querySelectorAll(".sort-option").forEach(option =>
  option.addEventListener("click", function () {
    sortProducts(this.dataset.order);
  })
);


window.onclick = function (event) {
  if (!event.target.closest("#sortButton")) {
    document.querySelector(".sort-container").classList.remove("show");
  }
};

//Navbar
const header = document.querySelector(".header");
const nav = document.querySelector(".navbar");
const navHeight = nav.getBoundingClientRect().height;
// Function to handle the sticky behavior
const stickyNav = function (entries) {
  const [entry] = entries;

  if (!entry.isIntersecting) {
    nav.classList.add("sticky", "visible");
  } else {
    nav.classList.remove("sticky", "visible");
  }
};

const headerObserver = new IntersectionObserver(stickyNav, {
  root: null,
  threshold: 0,
  rootMargin: `-${navHeight}px`,
});

headerObserver.observe(header);